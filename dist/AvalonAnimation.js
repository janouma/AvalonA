// Generated by CoffeeScript 1.9.3

/* AvalonAnimation 0.9.1 */

(function() {
  var defineAvalonAnimation, ref, ref1, ref2, ref3,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  console.log('%cAvalonAnimation 0.9.1', 'font-size:80%;padding:0.2em 0.5em;color:#FFFFD5;background-color:#FF0066;');

  defineAvalonAnimation = function(TweenMax, TweenLite, GSEases) {
    var Linear, Power1;
    Power1 = GSEases.Power1;
    Linear = GSEases.Linear;
    return {

      /* Balance */
      Balance: function(options) {
        var duration, from, to;
        if (options == null) {
          options = {};
        }
        from = options.from, to = options.to, duration = options.duration;
        if (from == null) {
          from = {
            rx: 0,
            ry: -20
          };
        }
        if (to == null) {
          to = {
            rx: -from.rx,
            ry: -from.ry
          };
        }
        duration = duration == null ? 2.75 : parseFloat(duration);
        if (from.rx == null) {
          throw new Error("Balance.from.rx cannot be null");
        }
        if (from.ry == null) {
          throw new Error("Balance.from.ry cannot be null");
        }
        if (to.rx == null) {
          throw new Error("Balance.to.rx cannot be null");
        }
        if (to.ry == null) {
          throw new Error("Balance.to.ry cannot be null");
        }
        if (!duration) {
          throw new Error("Balance.duration is not valid");
        }
        return {
          getTimeline: function() {
            return this.timeline = new TweenMax(this.animatedObject, duration, {
              paused: true,
              css: {
                rotationX: to.rx,
                rotationY: to.ry
              },
              repeat: -1,
              yoyo: true,
              ease: Power1.easeInOut
            });
          },
          play: function(transformedLayer) {
            if (transformedLayer) {
              this.animatedObject = transformedLayer;
            }
            if (this.animatedObject) {
              return this.timeline = TweenLite.to(this.animatedObject, duration, {
                overwrite: true,
                css: {
                  rotationX: from.rx,
                  rotationY: from.ry
                },
                ease: Power1.easeInOut,
                onComplete: (function(_this) {
                  return function() {
                    return _this.getTimeline().play();
                  };
                })(this)
              });
            }
          },
          pause: function() {
            var ref;
            return (ref = this.timeline) != null ? ref.pause() : void 0;
          }
        };
      },

      /* Spotlight */
      Spotlight: function(options) {
        var angle, direction, duration, lastPosition, path;
        if (options == null) {
          options = {};
        }
        direction = options.direction, duration = options.duration, angle = options.angle;
        if (direction == null) {
          direction = 'cw';
        }
        duration = duration == null ? 8 : parseFloat(duration);
        angle = angle == null ? 20 : parseFloat(angle);
        if (direction !== 'cw' && direction !== 'ccw') {
          throw new Error("Spotlight.direction must be either 'cw'(clockwise) or 'ccw'(counter-clockwise)");
        }
        if (!duration) {
          throw new Error("Spotlight.duration is not valid");
        }
        if (!angle || !((0 <= angle && angle <= 180))) {
          throw new Error("Spotlight.angle is not valid");
        }
        path = [
          {
            rotationX: angle,
            rotationY: 0
          }, {
            rotationX: 0,
            rotationY: angle
          }, {
            rotationX: -angle,
            rotationY: 0
          }, {
            rotationX: 0,
            rotationY: -angle
          }, {
            rotationX: angle,
            rotationY: 0
          }
        ];
        if (direction === 'ccw') {
          path = path.reverse();
        }
        lastPosition = path[path.length - 1];
        return {
          getTimeline: function() {
            return this.timeline = new TweenMax(this.animatedObject, duration, {
              paused: true,
              overwrite: true,
              repeat: -1,
              ease: Linear.easeNone,
              bezier: path
            });
          },
          play: function(transformedLayer) {
            if (transformedLayer) {
              this.animatedObject = transformedLayer;
            }
            if (this.animatedObject) {
              return this.timeline = TweenLite.to(this.animatedObject, duration / 4, {
                overwrite: true,
                ease: Linear.easeNone,
                bezier: [lastPosition],
                onComplete: (function(_this) {
                  return function() {
                    return _this.getTimeline().play();
                  };
                })(this)
              });
            }
          },
          pause: function() {
            var ref;
            return (ref = this.timeline) != null ? ref.pause() : void 0;
          }
        };
      },

      /* Atom */
      Atom: function(options) {
        var a, allowedAxis, axis, css, duration, i, len, ref, selector;
        if (options == null) {
          options = {};
        }
        duration = options.duration, selector = options.selector, axis = options.axis;
        allowedAxis = ['x', 'y', 'z'];
        css = {};
        if (!axis || !axis.length) {
          axis = allowedAxis;
        }
        for (i = 0, len = axis.length; i < len; i++) {
          a = axis[i];
          if (axis !== allowedAxis) {
            if (ref = !a, indexOf.call(allowedAxis, ref) >= 0) {
              throw Error("Revolution.axis is not valid");
            }
          }
          css["rotation" + (a.toUpperCase())] = '+=360';
        }
        duration = duration == null ? 2.75 : parseFloat(duration);
        if (!duration) {
          throw Error("Revolution.duration is not valid");
        }
        return {
          getTimeline: function() {
            return this.timeline = new TweenMax(this.animatedObject, duration, {
              paused: true,
              css: css,
              repeat: -1,
              ease: Linear.easeNone
            });
          },
          play: function(transformedLayer, transformAttr) {
            var chunk;
            if (transformedLayer) {
              if (selector) {
                selector = ((function() {
                  var j, len1, ref1, results;
                  ref1 = selector.split(',');
                  results = [];
                  for (j = 0, len1 = ref1.length; j < len1; j++) {
                    chunk = ref1[j];
                    results.push(chunk + ":not([" + transformAttr + "])");
                  }
                  return results;
                })()).join(',');
                this.animatedObject = transformedLayer.querySelectorAll(selector);
              } else {
                this.animatedObject = transformedLayer;
              }
            }
            if (this.animatedObject) {
              return this.timeline = TweenLite.to(this.animatedObject, duration, {
                overwrite: true,
                css: css,
                ease: Linear.easeNone,
                onComplete: (function(_this) {
                  return function() {
                    return _this.getTimeline().play();
                  };
                })(this)
              });
            }
          },
          pause: function() {
            var ref1;
            return (ref1 = this.timeline) != null ? ref1.pause() : void 0;
          }
        };
      }
    };
  };


  /* Export */

  if (typeof define === 'function' && define.amd) {
    define('AvalonAnimation', ['tweenmax', 'tweenlite', 'GSEases'], function(tweenmax, tweenlite, GSEases) {
      return defineAvalonAnimation(tweenmax, tweenlite, GSEases);
    });
  } else {
    window.AvalonAnimation = defineAvalonAnimation(((ref = window.GreenSockGlobals) != null ? ref.TweenMax : void 0) || TweenMax, ((ref1 = window.GreenSockGlobals) != null ? ref1.TweenLite : void 0) || TweenLite, {
      Power1: ((ref2 = window.GreenSockGlobals) != null ? ref2.Power1 : void 0) || Power1,
      Linear: ((ref3 = window.GreenSockGlobals) != null ? ref3.Linear : void 0) || Linear
    });
  }

}).call(this);
