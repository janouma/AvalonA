(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e,r){this.id=e,null==r&&(r={}),this.zRefreshChild=t(this.zRefreshChild,this),this.debug=r.debug,this.deepnessAttribute=r.zAttr||"data-avalonA-deepness",this.cssClass=r["class"]||"avalona-inner-frame",this.xFactor=null!=r.xFactor?r.xFactor:1,this.yFactor=null!=r.yFactor?r.yFactor:1}var r,n;return n=.75,r=function(e){return""+e.prop("tagName")+"("+(e.attr("id")||e.attr("class")||e.attr("href"))+")"},e.prototype.find3dFrames=function(){if(this.outerFrameJQueryNode=$("#"+this.id),this.innerFrameJQueryNode=$("."+this.cssClass,this.outerFrameJQueryNode).eq(0),this.debug===!0&&(console.log("@deepnessAttribute: "+this.deepnessAttribute),console.log("@cssClass: "+this.cssClass)),!this.outerFrameJQueryNode.size())throw new Error("Cannot find 3d frame '#"+this.id+"' in dom");if(!this.innerFrameJQueryNode.size())throw new Error("Cannot find 3d inner frame '#"+this.id+" ."+this.cssClass+"' in dom")},e.prototype.setUp=function(){return TweenLite.set(this.innerFrameJQueryNode[0],{transformPerspective:1e3})},e.prototype.addBehavior=function(){var e,t=this;return e=this.debug===!0?function(e,t){return console.log("rotationY: "+t)}:function(){},this.outerFrameJQueryNode.mousemove(function(r){var n,i;return i=(r.pageX-$(window).prop("innerWidth")/2)/25,n=-1*(r.pageY-$(window).prop("innerHeight")/2)/15,e(n,i),TweenLite.set(t.innerFrameJQueryNode[0],{rotationX:n*t.yFactor,rotationY:i*t.xFactor})}),this.outerFrameJQueryNode.on("mouseout","#"+this.id,function(){return TweenLite.to(t.innerFrameJQueryNode[0],1,{rotationX:0,rotationY:0})})},e.prototype.removeBehavior=function(){var e,t;return null!=(e=this.outerFrameJQueryNode)&&e.off("mousemove"),null!=(t=this.outerFrameJQueryNode)?t.off("mouseout"):void 0},e.prototype.zRefresh=function(e){var t,n,i;return null==e&&(e=null),n=this,null==e&&(e=this.innerFrameJQueryNode),i="string"==typeof e?$(i,this.innerFrameJQueryNode):$(e),this.debug===!0&&console.log("target: "+r(i)),this.setZOf(i),t=i.children().eq(0),this.debug===!0&&console.log("zRefresh firstChild: "+r(t)),this.zRefreshChild(t).siblings().each(function(){return n.zRefreshChild($(this))})},e.prototype.zRefreshChild=function(e){if(!e)throw new Error("zRefreshChild child argument cannot be null");return $("["+this.deepnessAttribute+"]",e).length?(this.debug===!0&&console.log("zRefresh child "+r(e)+" has children"),this.zRefresh(e)):e.attr(this.deepnessAttribute)&&(this.debug===!0&&console.log("zRefresh child "+r(e)+" has '"+this.deepnessAttribute+"'"),this.setZOf(e)),e},e.prototype.setZOf=function(e){var t;if(!e)throw new Error("setZOf target argument cannot be null");return TweenLite.set(e[0],{transformStyle:"preserve-3d",overflow:"visible"}),t=e.attr(this.deepnessAttribute),t?TweenLite.to(e[0],n,{z:t}):void 0},e.prototype.refresh=function(){return this.removeBehavior(),this.find3dFrames(),this.setUp(),this.zRefresh(),this.addBehavior()},e.prototype.start=function(){return this.refresh()},e}(),window.AvalonA=function(t,r){return null==r&&(r=!1),new e(t,r)}}).call(this);
;