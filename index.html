<!DOCTYPE html>
<html lang="en-us">

    <head>
        <meta charset="UTF-8">
        <title>Avalon (A) by janouma</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
        <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    </head>

    <body>
        <section class="page-header">
            <h1 class="project-name">Avalon (A)</h1>
            <h2 class="project-tagline">Bring deepness to your web app</h2>
            <a href="https://github.com/janouma/AvalonA" class="btn">View on GitHub</a>
            <a href="https://github.com/janouma/AvalonA/zipball/master" class="btn">Download .zip</a>
            <a href="https://github.com/janouma/AvalonA/tarball/master" class="btn">Download .tar.gz</a>
        </section>

        <section id="t3d-frame" class="preview">
            <img class="lightfx" src="images/lightfx-sd.png"/>
            <div class="t3d-layer" id="t3d-layer">
                <div transform="rx:60">
                    <div class="gravity">
                        <img class="root black-hole" src="images/black-hole-sd.png"/>
                        <div class="group-hole absolute">
                            <img class="black-hole" transform="z:-40; rz:60; ry:6" src="images/black-hole-sd.png"/>
                            <img class="black-hole absolute" transform="z:-80; rz:90; rx:6" src="images/black-hole-sd.png"/>
                            <img class="black-hole absolute" transform="z:-120; rz:120; rx:6; ry:6" src="images/black-hole-sd.png"/>
                            <img class="black-hole absolute" transform="z:-160; rz:150; rx:-6; ry:-6" src="images/black-hole-sd.png"/>
                        </div>

                        <div class="portfolio-scaler absolute expand hidden shrink animated">
                            <div class="portfolio-stand absolute expand" transform="z: 5">
                                <div class="portfolio" transform="ox: 1; oy: 1; rx: -115; ry: 15">
                                    <div class="back-cover absolute expand" transform="oy: 1; rx: -17.5; ry: 180">
                                        <div class="inner-cover absolute expand hide-back" transform="ry: 180"></div>
                                        <div class="outer-cover expand hide-back"><div class="title">Portfolio</div></div>
                                    </div>

                                    <div class="scaler absolute hidden animated">
                                        <div class="sheet" transform="rz: 15; y: -80">
                                            <div class="gravity">
                                                <div class="back page absolute expand hide-back" transform="ry: 180; rz:180">
                                                    <div class="description"></div>
                                                </div>
                                                <img class="front page hide-back"/>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="absolute expand" transform="rx: 90">
                                        <div class="gravity">
                                            <div class="scaler absolute hidden animated">
                                                <div class="sheet" transform="z: 250; rx: -30; ry: -20">
                                                    <div class="back page absolute expand hide-back" transform="ry: 180">
                                                        <div class="description"></div>
                                                    </div>
                                                    <img class="front page hide-back"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="scaler absolute hidden animated">
                                        <div class="sheet" transform="y: 30; z: -225; rz: -30; rx: -10">
                                            <div transform="ry: 90">
                                                <div class="gravity">
                                                    <div transform="ry: -90">
                                                        <div class="back page absolute expand hide-back" transform="ry: 180; rz: 180">
                                                            <div class="description"></div>
                                                        </div>
                                                        <img class="front page hide-back" transform="rz: 180"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="scaler absolute hidden animated">
                                        <div class="sheet" transform="x: -200; y: -75; z: 150; rx: 30">
                                            <div transform="rx: 90; ry: 180">
                                                <div class="gravity">
                                                    <div transform="rx: -90">
                                                        <div class="back page absolute expand hide-back" transform="ry: 180">
                                                            <div class="description"></div>
                                                        </div>
                                                        <img class="front page hide-back"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="scaler absolute hidden animated">
                                        <div class="sheet" transform="x: 225; y: -200; z: 150; rx: 30; ry: 30; rz: -15">
                                            <div transform="ry: 90">
                                                <div class="gravity">
                                                    <div transform="ry: -90">
                                                        <div class="gravity">
                                                            <div class="back page absolute expand hide-back" transform="ry: 180">
                                                                <div class="description"></div>
                                                            </div>
                                                            <img class="front page hide-back"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="front-cover expand" transform="oy: 1; rx: -17.5">
                                        <div class="inner-cover absolute expand hide-back" transform="ry: 180"></div>
                                        <div class="outer-cover expand hide-back"><div class="title">Portfolio</div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <img class="loader" src="data:image/png;base64,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"/> -->
        </section>

        <section class="main-content">
<p><em>version: 1.2.0</em></p>

<p><strong>Avalon(A)</strong> allows you to easily add 3d to a set of html elements to simulate a deepness effect. To make this 3d effect noticeable, all html elements pertaining to the <code>transformed layer</code> <em>(basically the root container to which the 3d effect get applied to)</em> - rotate on their x and y axis according to mouse movements.</p>

<h1 id="summary">Summary</h1>

<ul>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#example">Example</a>

<ul>
<li><a href="#html">Html</a></li>
<li><a href="#script">Script</a></li>
</ul></li>
<li><a href="#api">API</a>

<ul>
<li><a href="#constructorOptions">Constructor options</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#properties">Properties</a></li>
<li><a href="#events">Events</a></li>
</ul></li>
<li><a href="#avalonAnimation">AvalonAnimation</a>

<ul>
<li><a href="#balance">Balance</a></li>
<li><a href="#spotlight">Spotlight</a></li>
<li><a href="#atom">Atom</a></li>
</ul></li>
<li><a href="#speedTesterUtility">SpeedTester utility</a></li>
<li><a href="#browserCompatibility">Browser compatibility</a></li>
<li><a href="#usingRequireJS">Using it with require.js</a></li>
</ul>

<h1 id="anamedependenciesadependencies"><a name="dependencies"></a> Dependencies</h1>

<ul>
<li><a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenLite</strong> and <strong>CSSPlugin</strong> modules</li>
</ul>

<h1 id="anameexampleaexample"><a name="example"></a> Example</h1>

<h2 id="anamehtmlahtml"><a name="html"></a> Html</h2>

<pre><code class="html">&lt;div id=&quot;frame-3d&quot;&gt; &lt;!-- 3d Frame --&gt;
    &lt;div id=&quot;avalona-inner-frame&quot;&gt; &lt;!-- transformed layer --&gt;
        &lt;div id=&quot;half-circle&quot; data-avalonA-transform=&quot;ox: 0.5; oy: 0.35; z:-300&quot;&gt;&lt;/div&gt;
            &lt;div id=&quot;square&quot; data-avalonA-transform=&quot;z:75; rx:20.32; ry:5; rz:-10.2&quot;&gt;
                &lt;div id=&quot;inner-square&quot; data-avalonA-transform=&quot;z:150&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;div id=&quot;circle&quot; data-avalonA-transform=&quot;x:100; y:150; z:200;rx:45&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>It is mandatory to have at least the <code>3d Frame</code> and <code>transformed layer</code> defined when <strong>Avalon(A)</strong> initialization occurs. Within the <code>3d Frame</code>, the element div having the id <code>avalona-inner-frame</code> becomes the <code>transformed layer</code>.</p>

<p><code>data-avalonA-transform</code> attribute value has the following structure:</p>

<p><strong>x: x translation; y: y translation; z: z translation; rx: x rotation; ry: y rotation; rz: z rotation; ox: x origin transform; oy: y origin transform; oz: z origin transform</strong></p>

<p>All properties are optional.</p>

<h2 id="anamescriptascript"><a name="script"></a> Script</h2>

<pre><code class="js">$(function(){
    AvalonA('frame-3d', 'avalona-inner-frame').start();
});
</code></pre>

<h1 id="anameapiaapi"><a name="api"></a> API</h1>

<h2 id="anameconstructoroptionsaconstructoroptions"><a name="constructorOptions"></a> Constructor options</h2>

<p>It is possible to pass an object along with the id of the <code>3d Frame</code> to set options:</p>

<pre><code class="js">$(function(){
    AvalonA('frame-3d', 'avalona-inner-frame', {option: value}).start();
});
</code></pre>

<h5 id="tattr"><em>tAttr</em></h5>

<p>Changes the name of the attribute used to define layer <strong>transformations</strong>. Default value is <code>data-avalonA-transform</code>.</p>

<h5 id="fy"><em>fy</em></h5>

<p>A function that affects the amount of rotation triggered by the mouse movements on the <strong>y axis</strong>.</p>

<pre><code class="js">AvalonA('frame-3d', 'avalona-inner-frame', {fy: function(rotation){
    return rotation * 2;
} }).start();
</code></pre>

<p>Default function as no effect on the rotation value.</p>

<h5 id="fx"><em>fx</em></h5>

<p>A function that affects the amount of rotation triggered by the mouse movements on the <strong>x axis</strong>. Default function as no effect on the rotation value.</p>

<h5 id="activearea"><em>activeArea</em></h5>

<p>When available, restrict mouse movements tracking to this area: moving outside the area reset the <code>transformed layer</code> rotation.</p>

<pre><code class="js">var options = {
    activeArea: {
        position: {
            x: 'auto',
            y: '15%'
        },
        attachment: 'scroll',
        width: '150px',
        height: 100
    }
};
AvalonA('frame-3d', 'avalona-inner-frame', options).start();
</code></pre>

<p>Enable the <code>debug</code> option to display the area <em>( for development purpose only )</em>.</p>

<h5 id="activearea.width"><em>activeArea.width</em></h5>

<ul>
<li>numeric like <code>200</code></li>
<li>length like <code>'200px'</code></li>
<li>percent like <code>'30%'</code></li>
</ul>

<h5 id="activearea.height"><em>activeArea.height</em></h5>

<ul>
<li>numeric like <code>100</code></li>
<li>length like <code>'100px'</code></li>
<li>percent like <code>'20%'</code></li>
</ul>

<h5 id=""><em>[activeArea.position]</em></h5>

<p>Set the position of the area. Possible values:</p>

<ul>
<li><code>'auto'</code> means that the area will be centered within the browser window. <strong><em>(default)</em></strong></li>
<li><code>{x: value, y: value}</code> where <strong><em>value</em></strong> can be

<ul>
<li><code>null</code></li>
<li><code>'auto'</code></li>
<li>numeric</li>
<li>length</li>
<li>percent</li>
</ul></li>
</ul>

<h5 id=""><em>[activeArea.attachment]</em></h5>

<p>Act like css <code>position: absolute|fixed</code>. Possible values:</p>

<ul>
<li><code>'fixed'</code> same as css <code>position: fixed</code>. <strong><em>(default)</em></strong></li>
<li><code>'scroll'</code> like css <code>position: absolute</code>, the area will scroll along with the <code>transformed layer</code></li>
</ul>

<h5 id="animation"><em>animation</em></h5>

<p>Animates the <code>transformed layer</code> when mouse is outside the active area <em>– meaning the actual <code>activeArea</code> or simply the <code>3d Frame</code> when no <code>activeArea</code> is provided</em>. The animation plays as well when the mouse is iddle.</p>

<p>The <code>animation</code> object must have the following api:</p>

<pre><code class="js">animation: {
    play: function(transformedLayer){
        // animation code goes here
    },

    pause: function(){
        // pause code goes here
    }
}
</code></pre>

<p>As the example shows, the <code>play()</code> method received as first argument the <code>transformed layer</code>, thus one can animate any attribute of this element <em>– not just the rotation</em>.</p>

<h5 id="idletimeout"><em>idleTimeout</em></h5>

<p>The delay, in milliseconds, after which the user is considered idle when there is no mouse movements:</p>

<ul>
<li>Default value is <strong>1000</strong></li>
<li><strong>0</strong> is equivalent to default</li>
<li>Any negative value means <strong><em>infinite</em></strong></li>
</ul>

<p>When the user is idle, the animation resumes <em>– if any –</em> and <code>endrotation</code> event is triggered.</p>

<h5 id="debug"><em>debug</em></h5>

<p>Enable debug logs and display when set to <code>true</code>.</p>

<h2 id="anamemethodsamethods"><a name="methods"></a> Methods</h2>

<h5 id="refresh"><em>refresh()</em></h5>

<p>Fetch <code>3d Frame</code> and <code>transformed layer</code> from the DOM and apply initial setup.</p>

<p>Return <strong>layers</strong> <em>(<a href="#layers">see <strong>layers</strong> property</a>)</em>.</p>

<h5 id="enable"><em>enable()</em></h5>

<p>Set <code>disabled</code> flag to <code>false</code> and call <strong><em>refresh()</em></strong>.</p>

<h5 id="start"><em>start()</em></h5>

<p>Alias for <strong><em>enable()</em></strong>.</p>

<h5 id="disable"><em>disable()</em></h5>

<p>Flatten <code>transformed layer</code>, remove mouse movement tracking, unable events and pause animation.</p>

<h5 id="anamerefreshtransformarefreshtransform"><a name="refreshTransform"></a> <em>refreshTransform( [target : selector OR html node] )</em></h5>

<p>Update <strong>transformations</strong> according to new values of <code>data-avalonA-transform</code>.
When <strong>target</strong> is provided, only first matching html node get updated.</p>

<h5 id="freeze"><em>freeze()</em></h5>

<p>Stop animation – <em>if any</em> – and disable events if Avalon(A) is &#8220;enabled&#8221;.</p>

<h5 id="release"><em>release()</em></h5>

<p>Resume animation – <em>if any</em> – and enable events if Avalon(A) is &#8220;enabled&#8221;.</p>

<h2 id="anamepropertiesaproperties"><a name="properties"></a> Properties</h2>

<h5 id="anamelayersalayers"><a name="layers"></a> <em>layers</em></h5>

<p>Provides all nodes picked up while running <code>start()</code> or <code>refresh()</code> or <code>enable()</code> method.
It has the following structure:</p>

<pre><code class="js">{
    &quot;#&lt;layer-id-1&gt;&quot;: &lt;Layer&gt;,
    &quot;#&lt;layer-id-2&gt;&quot;: &lt;Layer&gt;,
    ...
    &quot;.&lt;layer-class-1&gt;&quot;: &lt;Layer&gt;[],
    &quot;.&lt;layer-class-2&gt;&quot;: &lt;Layer&gt;[],
    ...
    all: &lt;Layer&gt;[]
}
</code></pre>

<p>The <strong>layers</strong> property references all transformed html elements by their ids <em>(#layer-id)</em>, their css classes <em>(.layer-class)</em> and
all elements are also referenced under <code>all</code>, including those not having neither id nor class attribute.</p>

<p>Each html element is wrapped by a <code>Layer</code> object — <em>private to the lib, meaning you can&#8217;t directly instanciate one</em> — so that it is more convenient to manipulate transform properties.</p>

<p>The <code>Layer</code> instance has the following properties:</p>

<ul>
<li><code>node</code> – the raw html node</li>
<li><code>x</code> – get/set the translateX style of the node</li>
<li><code>y</code> – get/set the translateY style of the node</li>
<li><code>z</code> – get/set the translateZ style of the node</li>
<li><code>rx</code> – get/set the rotateX style of the node</li>
<li><code>ry</code> – get/set the rotateY style of the node</li>
<li><code>rz</code> – get/set the rotateZ style of the node</li>
<li><code>ox</code> – get/set the x origin transform style of the node</li>
<li><code>oy</code> – get/set the y origin transform style of the node</li>
<li><code>oz</code> – get/set the z origin transform style of the node</li>
</ul>

<p>The node style get updated – <em>according to the x, y, z, &#8230; getter/setter</em> – only after calling either
<code>refreshTransform</code> method <em>(<a href="#refreshTransform">see <code>refreshTransform()</code></a>)</em> or <code>&lt;Layer&gt;.refresh()</code>.
Calling <code>refreshTransform</code> with no <strong>node</strong> argument also update the layers property: so if transformations has been added to a new node,
this one will also end up as a <code>Layer</code> in the <code>layers</code> field.</p>

<p>The <code>Layer</code> instance has the following methods:</p>

<ul>
<li><p><code>refresh()</code> – to actually apply transformations</p></li>
<li><p><code>transform({[x:&lt;x value&gt;], [y:&lt;y value&gt;], [z:&lt;z value&gt;], ...})</code> – to set several transformations at once</p></li>
</ul>

<h2 id="anameeventsaevents"><a name="events"></a> Events</h2>

<p>It is possible to add event listeners like this</p>

<pre><code class="js">var options = {
    on: {
        event: function(){ /* event code goes here */ },
    }
};
AvalonA('frame-3d', 'avalona-inner-frame', options).start();
</code></pre>

<p>or this</p>

<pre><code class="js">var a = AvalonA('frame-3d', 'avalona-inner-frame', options);
a.onevent = function(){ /* event code goes here */ };
a.start();
</code></pre>

<p>Available events:</p>

<h5 id="startrotation"><em>startrotation</em></h5>

<p>Triggered when <code>transformed layer</code> rotation starts.</p>

<h5 id="endrotation"><em>endrotation</em></h5>

<p>Triggered when <code>transformed layer</code> rotation ends.</p>

<h5 id="ready"><em>ready</em></h5>

<p>Triggered ONLY ONCE by <code>start()</code> or <code>enable()</code> BEFORE transformations gets actually applied.</p>

<h5 id="refresh"><em>refresh</em></h5>

<p>Triggered every time by <code>refresh()</code> or <code>refreshTransform()</code> AFTER transformations has been applied.</p>

<h5 id="enable"><em>enable</em></h5>

<p>Triggered every time Avalon(A) gets &#8220;enabled&#8221; – <em>by <code>enable()</code></em> – AFTER transformations has been applied.</p>

<p>If Avalon(A) was already &#8220;enabled&#8221; by the time <code>enable()</code> gets called, the event is not triggered again.</p>

<h5 id="start"><em>start</em></h5>

<p>Alias for <code>enable</code> event.</p>

<h1 id="anameavalonanimationaavalonanimation"><a name="avalonAnimation"></a> AvalonAnimation</h1>

<p>Provides a collection of preset animations.</p>

<h2 id="anamebalanceabalance"><a name="balance"></a> Balance</h2>

<p>Adds a balancing movement between two rotation angles.</p>

<h5 id="dependencies"><em>Dependencies</em></h5>

<ul>
<li><a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenMax</strong> module</li>
</ul>

<p>Note that the <strong>TweenMax</strong> module includes the <strong>TweenLite</strong> one <em>– see <a href="http://www.greensock.com">GSAP</a> documentation for details</em>.</p>

<h5 id="examples"><em>Examples</em></h5>

<p><em>Example 1</em></p>

<pre><code class="js">animation: AvalonAnimation.Balance()
</code></pre>

<p><em>Example 2</em></p>

<pre><code class="js">animation: AvalonAnimation.Balance({
  duration: 0.75,

  from:{
    rx: 30,
    ry: -30
  },

  to:{
    rx: -90,
    ry: 30
  }
})
</code></pre>

<h5 id="options"><em>Options</em></h5>

<ul>
<li>duration <em>(seconds)</em> – <strong><em>default value is 2.75</em></strong></li>
<li>from: { rx: <em>< rotation on X axis ></em>, ry: <em>< rotation on Y axis ></em> } – <strong><em>default value is { rx: 0 , ry: &#8211;20 }</em></strong></li>
<li>to: { rx: <em>< rotation on X axis ></em>, ry: <em>< rotation on Y axis ></em> } – <strong><em>default value is the negative version of <code>from</code></em></strong></li>
</ul>

<h2 id="anamespotlightaspotlight"><a name="spotlight"></a> Spotlight</h2>

<p>Rotates like a spotlight.</p>

<h5 id="dependencies"><em>Dependencies</em></h5>

<ul>
<li><a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenMax</strong> and <strong>BezierPlugin</strong> modules</li>
</ul>

<p>Note that the <strong>TweenMax</strong> module includes the <strong>TweenLite</strong> and <strong>BezierPlugin</strong> ones <em>– see <a href="http://www.greensock.com">GSAP</a> documentation for details</em>.</p>

<h5 id="examples"><em>Examples</em></h5>

<p><em>Example 1</em></p>

<pre><code class="js">animation: AvalonAnimation.Spotlight()
</code></pre>

<p><em>Example 2</em></p>

<pre><code class="js">animation: AvalonAnimation.Spotlight({
  duration: 5,
  direction: 'ccw',
  angle: 10
})
</code></pre>

<h5 id="options"><em>Options</em></h5>

<ul>
<li>duration <em>(seconds)</em> – <strong><em>default value is 8</em></strong></li>
<li>direction <code>'cw'</code> <em>(clockwise)</em> or <code>'ccw'</code> <em>(counter-clockwise)</em> – <strong><em>default value is &#8216;cw&#8217;</em></strong></li>
<li>angle – <strong><em>default value is 20</em></strong></li>
</ul>

<h2 id="anameatomaatom"><a name="atom"></a> Atom</h2>

<p>Rotates a layer or a group of layers like electrons around an atom&#8217;s nucleus.</p>

<h5 id="dependencies"><em>Dependencies</em></h5>

<ul>
<li><a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenMax</strong> module</li>
</ul>

<h5 id="example"><em>Example</em></h5>

<pre><code class="js">animation: AvalonAnimation.Atom({
  duration: 20,
  selector: '.electron',
  axis: ['y','z']
})
</code></pre>

<h5 id="options"><em>Options</em></h5>

<ul>
<li><p>duration <em>(seconds)</em> – <strong><em>default value is 2.75</em></strong></p></li>
<li><p>selector – every <small>non-transformed</small> <sup>(*)</sup> div within the <code>transformed layer</code> matching this selector will rotate, along with all his children.</p></li>
<li><p>axis – the axis on which elements will rotate <strong><em>(default values are x,y and z)</em></strong></p></li>
</ul>

<p><sup>(*)</sup> <small>non-transformed means not having the <code>data-avalonA-transform</code> attribute (or the one define through &#8220;tAttr&#8221; option).</small></p>

<h1 id="anamespeedtesterutilityaspeedtesterutility"><a name="speedTesterUtility"></a> SpeedTester utility</h1>

<p>The <strong>SpeedTester</strong> <em>(SpeedTester.min.js)</em> allows you to check system performance before activating <strong>Avalon(A)</strong>, thus preventing to undermine the usability of your website. It is meant to be used like this:</p>

<p><em>Main html document – preferably before loading any other scripts</em></p>

<pre><code class="html">&lt;script&gt;
    var speedTester = new SpeedTester(&lt; how many times the test must be run (default 1) &gt;);
    speedTester.run();
&lt;/script&gt;
</code></pre>

<p><em>Main script – after document as been loaded</em></p>

<pre><code class="js">speedTester.oncomplete(function(results){
    if(results.fps &gt; 30){
        AvalonA('frame-3d', 'avalona-inner-frame').start();
    }else{
        console.warn('Your frame rate is too low, recommended: 30');
    }
});
</code></pre>

<h1 id="anamebrowsercompatibilityabrowsercompatibility"><a name="browserCompatibility"></a> Browser compatibility</h1>

<ul>
<li>Safari</li>
<li>Chrome</li>
<li>Firefox</li>
</ul>

<p><em>Nothing happens on browsers that doesn&#8217;t support 3d transform.</em></p>

<h1 id="anameusingrequirejsausingitwithrequire.js"><a name="usingRequireJS"></a> Using it with require.js</h1>

<p><strong>Avalon(A)</strong> is AMD compliant: if <strong>require.js</strong> is present, <code>AvalonA</code> function won&#8217;t be exposed as a global variable but as a module having the same name.
The same goes for <code>AvalonAnimation</code> plugin and <code>SpeedTester</code> utility.</p>

<p>As an AMD module, <code>AvalonA</code> requires <code>tweenlite</code> module. <code>AvalonAnimation</code> requires <code>tweenmax</code>,<code>tweenlite</code> and <code>GSEases</code>modules, where <code>GSEases</code> contains key/value pairs of standard greensock easing functions — <em>the ones bundled with TweenMax</em>.</p>

<h4 id="greensockspecifics">GreenSock specifics</h4>

<p>Keep in mind that since GreenSock bundles several modules within one file — <em>indeed TweenMax file contains TweenMax as well as TweenLite, CSSPlugin, BezierPlugin, Eeasin, etc</em> — it needs special care to be used with <strong>require.js</strong>.</p>

<p>Check out this <a href="https://raw.github.com/janouma/AvalonA/master/dist/avalona-amd-test.zip">code sample</a> to understand how to use <strong>Avalon(A)</strong> and <strong>GreenSock</strong> with <strong>require.js</strong>.</p>
        </section>

        <footer class="site-footer">
            <span class="site-footer-owner"><a href="https://github.com/janouma/AvalonA">Avalon (A)</a> is maintained by <a href="https://github.com/janouma">janouma</a>.</span>
            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> based on the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
        </footer>

        <script data-main="js/app" src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js"></script>
    </body>

</html>