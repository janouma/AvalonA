<!DOCTYPE html>
<html lang="en-us">

    <head>
        <meta charset="UTF-8">
        <title>Avalon (A) by janouma</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
        <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    </head>

    <body>
        <section class="page-header">
            <h1 class="project-name">Avalon (A)</h1>
            <h2 class="project-tagline">Bring deepness to your web app</h2>
            <a href="https://github.com/janouma/AvalonA" class="btn">View on GitHub</a>
            <a href="https://github.com/janouma/AvalonA/zipball/master" class="btn">Download .zip</a>
            <a href="https://github.com/janouma/AvalonA/tarball/master" class="btn">Download .tar.gz</a>
        </section>

        <!--<section class="preview">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse nec imperdiet augue. Aenean sit amet mauris volutpat, dapibus sem vel, rhoncus magna. Suspendisse potenti. Nulla facilisi. Duis ut elit sed augue tincidunt lobortis. Maecenas bibendum, lacus ac sodales pretium, sapien purus imperdiet quam, in euismod lacus sapien non augue. Integer lobortis fringilla turpis. Proin at diam a nibh laoreet ornare. Donec volutpat erat id ullamcorper mattis.</p>

<p>Nam quis placerat lorem. Fusce rhoncus ex id neque ultricies, tristique hendrerit neque egestas. Nullam rutrum orci lacinia, viverra elit in, tincidunt orci. Sed efficitur turpis vitae ultrices vestibulum. Mauris imperdiet libero vitae laoreet egestas. Nam massa nulla, iaculis sed ipsum et, iaculis eleifend nulla. Vivamus lacus turpis, sollicitudin luctus ex eu, tincidunt congue lacus. Nam posuere sagittis dapibus. Etiam mi magna, eleifend dignissim orci in, mollis iaculis libero. Quisque eros metus, mattis et posuere a, sodales et nisi. Nulla faucibus quis turpis sed bibendum. Duis rhoncus elit ac turpis fermentum, vitae volutpat justo consequat. Nulla sapien augue, venenatis a lacinia eget, rutrum et nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus non placerat sapien, placerat porttitor lacus.</p>

<p>In interdum varius nibh nec lacinia. Aliquam rhoncus massa id faucibus facilisis. Cras nec sollicitudin nunc. Etiam bibendum eleifend enim ac ullamcorper. Aliquam pulvinar, quam nec facilisis faucibus, metus eros consectetur nisl, quis sollicitudin mi arcu id orci. Curabitur non nisi cursus, posuere lorem nec, malesuada eros. Quisque eu ipsum eget odio mollis faucibus.</p>
        </section>-->

        <section class="main-content">
<p><em>version: 0.10.2</em></p>

<p><strong>Avalon(A)</strong> allows you to easily add 3d to a set of html elements to simulate a deepness effect. To make this 3d effect noticeable, all html elements pertaining to the <code>transformed layer</code> <em>(basically the root container to which the 3d effect get applied to)</em> - rotate on their x and y axis according to mouse movements.</p>

<h1>
<a id="summary" class="anchor" href="#summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary</h1>

<ul>
<li><a href="#dependencies">Dependencies</a></li>
<li>
<a href="#example">Example</a>

<ul>
<li><a href="#html">Html</a></li>
<li><a href="#script">Script</a></li>
</ul>
</li>
<li>
<a href="#api">API</a>

<ul>
<li><a href="#constructorOptions">Constructor options</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#events">Events</a></li>
</ul>
</li>
<li>
<a href="#plugins">Plugins</a>

<ul>
<li>
<a href="#avalonAnimation">AvalonAnimation</a>

<ul>
<li><a href="#balance">Balance</a></li>
<li><a href="#spotlight">Spotlight</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#speedTesterUtility">SpeedTester utility</a></li>
<li><a href="#browserCompatibility">Browser compatibility</a></li>
<li><a href="#usingRequireJS">Using it with require.js</a></li>
</ul>

<h1>
<a id="-dependencies" class="anchor" href="#-dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="dependencies"></a> Dependencies</h1>

<ul>
<li>
<a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenLite</strong> and <strong>CSSPlugin</strong> modules</li>
</ul>

<h1>
<a id="-example" class="anchor" href="#-example" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="example"></a> Example</h1>

<h2>
<a id="-html" class="anchor" href="#-html" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="html"></a> Html</h2>

<pre><code>&lt;div id="frame-3d"&gt; &lt;!-- 3d Frame --&gt;
    &lt;div id="avalona-inner-frame"&gt; &lt;!-- transformed layer --&gt;
        &lt;div id="half-circle" data-avalonA-transform="z:-300"&gt;&lt;/div&gt;
            &lt;div id="square" data-avalonA-transform="z:75; rx:20.32; ry:5; rz:-10.2"&gt;
                &lt;div id="inner-square" data-avalonA-transform="z:150"&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;div id="circle" data-avalonA-transform="z:200;rx:45"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>It is mandatory to have at least the <code>3d Frame</code> and <code>transformed layer</code> defined when <strong>Avalon(A)</strong> initialization occurs. Within the <code>3d Frame</code>, the element div having the id <code>avalona-inner-frame</code> becomes the <code>transformed layer</code>.</p>

<p><code>data-avalonA-transform</code> attribute value has the following structure:</p>

<p><strong>z: z translation; rx: x rotation; ry: y rotation; rz: z rotation</strong></p>

<p>All properties are optional.</p>

<h2>
<a id="-script" class="anchor" href="#-script" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="script"></a> Script</h2>

<pre><code>$(function(){
    AvalonA('frame-3d', 'avalona-inner-frame').start();
});
</code></pre>

<h1>
<a id="-api" class="anchor" href="#-api" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="api"></a> API</h1>

<h2>
<a id="-constructor-options" class="anchor" href="#-constructor-options" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="constructorOptions"></a> Constructor options</h2>

<p>It is possible to pass an object along with the id of the <code>3d Frame</code> to set options:</p>

<pre><code>$(function(){
    AvalonA('frame-3d', 'avalona-inner-frame', {option: value}).start();
});
</code></pre>

<h5>
<a id="tattr" class="anchor" href="#tattr" aria-hidden="true"><span class="octicon octicon-link"></span></a>tAttr
</h5>

<p>Changes the name of the attribute used to define layer <strong>z translation</strong>. Default value is <code>data-avalonA-transform</code>.</p>

<h5>
<a id="fy" class="anchor" href="#fy" aria-hidden="true"><span class="octicon octicon-link"></span></a>fy
</h5>

<p>A function that affects the amount of rotation triggered by the mouse movements on the <strong>y axis</strong>.</p>

<pre><code>AvalonA('frame-3d', 'avalona-inner-frame', {fy: function(rotation){
    return rotation * 2;
} }).start();
</code></pre>

<p>Default function as no effect on the rotation value.</p>

<h5>
<a id="fx" class="anchor" href="#fx" aria-hidden="true"><span class="octicon octicon-link"></span></a>fx
</h5>

<p>A function that affects the amount of rotation triggered by the mouse movements on the <strong>x axis</strong>. Default function as no effect on the rotation value.</p>

<h5>
<a id="activearea" class="anchor" href="#activearea" aria-hidden="true"><span class="octicon octicon-link"></span></a>activeArea
</h5>

<p>When available, restrict mouse movements tracking to this area: moving outside the area reset the <code>transformed layer</code> rotation.</p>

<pre><code>var options = {
    activeArea: {
        position: {
            x: 'auto',
            y: '15%'
        },
        attachment: 'scroll',
        width: '150px',
        height: 100
    }
};
AvalonA('frame-3d', 'avalona-inner-frame', options).start();
</code></pre>

<p>Enable the <code>debug</code> option to display the area <em>( for development purpose only )</em>.</p>

<h5>
<a id="activeareawidth" class="anchor" href="#activeareawidth" aria-hidden="true"><span class="octicon octicon-link"></span></a>activeArea.width
</h5>

<ul>
<li>numeric like <code>200</code>
</li>
<li>length like <code>'200px'</code>
</li>
<li>percent like <code>'30%'</code>
</li>
</ul>

<h5>
<a id="activeareaheight" class="anchor" href="#activeareaheight" aria-hidden="true"><span class="octicon octicon-link"></span></a>activeArea.height
</h5>

<ul>
<li>numeric like <code>100</code>
</li>
<li>length like <code>'100px'</code>
</li>
<li>percent like <code>'20%'</code>
</li>
</ul>

<h5>
<a id="activeareaposition" class="anchor" href="#activeareaposition" aria-hidden="true"><span class="octicon octicon-link"></span></a>[activeArea.position]
</h5>

<p>Set the position of the area. Possible values:</p>

<ul>
<li>
<code>'auto'</code> means that the area will be centered within the browser window. <strong><em>(default)</em></strong>
</li>
<li>
<code>{x: value, y: value}</code> where <strong><em>value</em></strong> can be

<ul>
<li><code>null</code></li>
<li><code>'auto'</code></li>
<li>numeric</li>
<li>length</li>
<li>percent</li>
</ul>
</li>
</ul>

<h5>
<a id="activeareaattachment" class="anchor" href="#activeareaattachment" aria-hidden="true"><span class="octicon octicon-link"></span></a>[activeArea.attachment]
</h5>

<p>Act like css <code>position: absolute|fixed</code>. Possible values:</p>

<ul>
<li>
<code>'fixed'</code> same as css <code>position: fixed</code>. <strong><em>(default)</em></strong>
</li>
<li>
<code>'scroll'</code> like css <code>position: absolute</code>, the area will scroll along with the <code>transformed layer</code>
</li>
</ul>

<h5>
<a id="animation" class="anchor" href="#animation" aria-hidden="true"><span class="octicon octicon-link"></span></a>animation
</h5>

<p>Animates the <code>transformed layer</code> when mouse is outside the active area <em>– meaning the actual <code>activeArea</code> or simply the <code>3d Frame</code> when no <code>activeArea</code> is provided</em>. The animation plays as well when the mouse is iddle.</p>

<p>The <code>animation</code> object must have the following api:</p>

<pre><code>animation: {

    play: function(transformedLayer){
        // animation code goes here
    },

    pause: function(){
        // pause code goes here
    }
}
</code></pre>

<p>As the example shows, the <code>play()</code> method received as first argument the <code>transformed layer</code>, thus one can animate any attribute of this element <em>– not just the rotation</em>.</p>

<h5>
<a id="idletimeout" class="anchor" href="#idletimeout" aria-hidden="true"><span class="octicon octicon-link"></span></a>idleTimeout
</h5>

<p>The delay, in milliseconds, after which the user is considered idle when there is no mouse movements:</p>

<ul>
<li>Default value is <strong>1000</strong>
</li>
<li>
<strong>0</strong> is equivalent to default</li>
<li>Any negative value means <strong><em>infinite</em></strong>
</li>
</ul>

<p>When the user is idle, the animation resumes <em>– if any –</em> and <code>endrotation</code> event is triggered.</p>

<h5>
<a id="debug" class="anchor" href="#debug" aria-hidden="true"><span class="octicon octicon-link"></span></a>debug
</h5>

<p>Enable debug logs and display when set to <code>true</code>.</p>

<h2>
<a id="-methods" class="anchor" href="#-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="methods"></a> Methods</h2>

<h5>
<a id="refresh" class="anchor" href="#refresh" aria-hidden="true"><span class="octicon octicon-link"></span></a>refresh()
</h5>

<p>Fetch <code>3d Frame</code> and <code>transformed layer</code> from the DOM and apply initial setup.</p>

<h5>
<a id="start" class="anchor" href="#start" aria-hidden="true"><span class="octicon octicon-link"></span></a>start()
</h5>

<p>Alias for <strong>refresh()</strong>.</p>

<h5>
<a id="enable" class="anchor" href="#enable" aria-hidden="true"><span class="octicon octicon-link"></span></a>enable()
</h5>

<p>Alias for <strong>refresh()</strong>.</p>

<h5>
<a id="disable" class="anchor" href="#disable" aria-hidden="true"><span class="octicon octicon-link"></span></a>disable()
</h5>

<p>Flatten <code>transformed layer</code>, remove mouse movement tracking, unable events and pause animation.</p>

<h5>
<a id="refreshtransform-target--selector-or-html-node-" class="anchor" href="#refreshtransform-target--selector-or-html-node-" aria-hidden="true"><span class="octicon octicon-link"></span></a>refreshTransform( [target : selector OR html node] )
</h5>

<p>Update <strong>z translation</strong> according to new values of <code>data-avalonA-transform</code>.
When <strong>target</strong> is provided, only matching html nodes get updated.</p>

<h2>
<a id="-events" class="anchor" href="#-events" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="events"></a> Events</h2>

<p>It is possible to add event listeners like this</p>

<pre><code>var options = {
    on: {
        event: function(){ /* event code goes here */ },
    }
};
AvalonA('frame-3d', 'avalona-inner-frame', options).start();
</code></pre>

<p>or this</p>

<pre><code>var a = AvalonA('frame-3d', 'avalona-inner-frame', options);
a.onevent = function(){ /* event code goes here */ };
a.start();
</code></pre>

<p>Available events:</p>

<h5>
<a id="startrotation" class="anchor" href="#startrotation" aria-hidden="true"><span class="octicon octicon-link"></span></a>startrotation
</h5>

<p>Triggered when <code>transformed layer</code> rotation starts.</p>

<h5>
<a id="endrotation" class="anchor" href="#endrotation" aria-hidden="true"><span class="octicon octicon-link"></span></a>endrotation
</h5>

<p>Triggered when <code>transformed layer</code> rotation ends.</p>

<h1>
<a id="-plugins" class="anchor" href="#-plugins" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="plugins"></a> Plugins</h1>

<h2>
<a id="-avalonanimation" class="anchor" href="#-avalonanimation" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="avalonAnimation"></a> AvalonAnimation</h2>

<p>Provides a collection of preset animations.</p>

<h3>
<a id="-balance" class="anchor" href="#-balance" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="balance"></a> Balance</h3>

<p>Adds a balancing movement between two rotation angles.</p>

<h6>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies
</h6>

<ul>
<li>
<a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenMax</strong> module</li>
</ul>

<p>Note that the <strong>TweenMax</strong> module includes the <strong>TweenLite</strong> one <em>– see <a href="http://www.greensock.com">GSAP</a> documentation for details</em>.</p>

<h6>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples
</h6>

<p><em>Example 1</em></p>

<pre><code>animation: AvalonAnimation.Balance()
</code></pre>

<p><em>Example 2</em></p>

<pre><code>animation: AvalonAnimation.Balance({
  duration: 0.75,

  from:{
    rx: 30,
    ry: -30
  },

  to:{
    rx: -90,
    ry: 30
  }
})
</code></pre>

<h6>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options
</h6>

<ul>
<li>duration <em>(seconds)</em> – <strong><em>default value is 2.75</em></strong>
</li>
<li>from: { rx: <em>&lt; rotation on X axis &gt;</em>, ry: <em>&lt; rotation on Y axis &gt;</em> } – <strong><em>default value is { rx: 0 , ry: -20 }</em></strong>
</li>
<li>to: { rx: <em>&lt; rotation on X axis &gt;</em>, ry: <em>&lt; rotation on Y axis &gt;</em> } – <strong><em>default value is the negative version of <code>from</code></em></strong>
</li>
</ul>

<h3>
<a id="-spotlight" class="anchor" href="#-spotlight" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="spotlight"></a> Spotlight</h3>

<p>Rotates like a spotlight.</p>

<h6>
<a id="dependencies-1" class="anchor" href="#dependencies-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies
</h6>

<ul>
<li>
<a href="http://www.greensock.com">GSAP 1.9.2+</a> <em>(GreenSock Animation Platform)</em> <strong>TweenMax</strong> and <strong>BezierPlugin</strong> modules</li>
</ul>

<p>Note that the <strong>TweenMax</strong> module includes the <strong>TweenLite</strong> and <strong>BezierPlugin</strong> ones <em>– see <a href="http://www.greensock.com">GSAP</a> documentation for details</em>.</p>

<h6>
<a id="examples-1" class="anchor" href="#examples-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples
</h6>

<p><em>Example 1</em></p>

<pre><code>animation: AvalonAnimation.Spotlight()
</code></pre>

<p><em>Example 2</em></p>

<pre><code>animation: AvalonAnimation.Spotlight({
  duration: 5,
  direction: 'ccw',
  angle: 10
})
</code></pre>

<h6>
<a id="options-1" class="anchor" href="#options-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options
</h6>

<ul>
<li>duration <em>(seconds)</em> – <strong><em>default value is 8</em></strong>
</li>
<li>direction <code>'cw'</code> <em>(clockwise)</em> or <code>'ccw'</code> <em>(counter-clockwise)</em> – <strong><em>default value is 'cw'</em></strong>
</li>
<li>angle – <strong><em>default value is 20</em></strong>
</li>
</ul>

<h1>
<a id="-speedtester-utility" class="anchor" href="#-speedtester-utility" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="speedTesterUtility"></a> SpeedTester utility</h1>

<p>The <strong>SpeedTester</strong> <em>(SpeedTester.min.js)</em> allows you to check system performance before activating <strong>Avalon(A)</strong>, thus preventing to undermine the usability of your website. It is meant to be used like this:</p>

<p><em>Main html document – preferably before loading any other scripts</em></p>

<pre><code>&lt;script&gt;
    var speedTester = new SpeedTester(&lt; how many times the test must be run (default 1) &gt;);
    speedTester.run();
&lt;/script&gt;
</code></pre>

<p><em>Main script – after document as been loaded</em></p>

<pre><code>speedTester.oncomplete(function(results){
    if(results.fps &gt; 30){
        AvalonA('frame-3d', 'avalona-inner-frame').start();
    }else{
        console.warn('Your frame rate is too low, recommended: 30');
    }
});
</code></pre>

<h1>
<a id="-browser-compatibility" class="anchor" href="#-browser-compatibility" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="browserCompatibility"></a> Browser compatibility</h1>

<ul>
<li>Safari</li>
<li>Chrome</li>
<li>Firefox</li>
</ul>

<p><em>Nothing happens on browsers that doesn't support 3d transform.</em></p>

<h1>
<a id="-using-it-with-requirejs" class="anchor" href="#-using-it-with-requirejs" aria-hidden="true"><span class="octicon octicon-link"></span></a><a name="usingRequireJS"></a> Using it with require.js</h1>

<p><strong>Avalon(A)</strong> is AMD compliant: if <strong>require.js</strong> is present, <code>AvalonA</code> function won't be exposed as a global variable but as a module having the same name.
The same goes for <code>AvalonAnimation</code> plugin and <code>SpeedTester</code> utility.</p>

<p>As an AMD module, <code>AvalonA</code> requires <code>jquery</code> and <code>tweenlite</code> modules. <code>AvalonAnimation</code> requires <code>tweenmax</code>,<code>tweenlite</code> and <code>GSEases</code>modules, where <code>GSEases</code> contains key/value pairs of standard greensock easing functions — <em>the ones bundled with TweenMax</em>.</p>

<h4>
<a id="greensock-specifics" class="anchor" href="#greensock-specifics" aria-hidden="true"><span class="octicon octicon-link"></span></a>GreenSock specifics</h4>

<p>Keep in mind that since GreenSock bundles several modules within one file — <em>indeed TweenMax file contains TweenMax as well as TweenLite, CSSPlugin, BezierPlugin, Eeasin, etc</em> — it needs special care to be used with <strong>require.js</strong>.</p>

<p>Check out this <a href="https://raw.github.com/janouma/AvalonA/master/dist/avalona-amd-test.zip">code sample</a> to understand how to use <strong>Avalon(A)</strong> and <strong>GreenSock</strong> with <strong>require.js</strong>.</p>


      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/janouma/AvalonA">Avalon (A)</a> is maintained by <a href="https://github.com/janouma">janouma</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>
        </section>
    </body>

</html>